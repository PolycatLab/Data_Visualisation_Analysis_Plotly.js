<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html lang="en"> <head> 
<meta http-equiv="content-type" content="text/html; charset=utf-8">
 <title>UV-Vis spectra</title> 
 <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
 </head> 
 
 <body> <p>UV-vis absorption sepctra for <b>1</b>, <b>1-AgBArF</b> (<i>in-situ</i> generated) and <b>AgBArF</b> in DCM (c = 100 &microM)</p> 
 
 <div id="myDiv"></div>
 
 <script>

function makeplot() {
 	Plotly.d3.csv('https://data.hpc.imperial.ac.uk/resolve/?doi=8763&file=3&access=', function(data){ processData(data) } );

};
	
function processData(allRows) {

	console.log(allRows);
	var x1 = [], y1 = [], x2 = [], y2 = [], x3 = [], y3 = []; 

	for (var i=0; i<allRows.length; i++) {
		row = allRows[i];
		x1.push( row['x1_data'] );
		y1.push( row['y1_data'] );
		x2.push( row['x2_data'] );
		y2.push( row['y2_data'] );
		x3.push( row['x3_data'] );
		y3.push( row['y3_data'] );
	}
	console.log( 'X1',x1, 'Y1',y1, 'X2',x2, 'Y2',y2, 'X3',x3, 'Y3',y3);
	makePlotly(x1,y1,x2,y2,x3,y3);
}

function makePlotly(x1,y1,x2,y2,x3,y3){
	var plotDiv = document.getElementById("plot");
	var trace1 = [{
		x: x1, 
		y: y1,
		name: '<b>1</b>',
		line: {
		width: 1},
		hovertemplate: '&#955;= %{x:.0f} nm: %{y:.2f}<extra></extra>',
	}];
	
	
	var trace2 = [{
		x: x2, 
		y: y2,
		name: '<b>1-AgBArF</b>',
		line: {
		//color: 'rgb(128, 0, 128)'
		width: 1},
		hovertemplate: '&#955;= %{x:.0f} nm: %{y:.2f}<extra></extra>',
	}];
	
	var trace3 = [{
		x: x3, 
		y: y3,
		name: 'AgBArF',
		line: {
		//color: 'rgb(128, 0, 128)'
		width: 1},
		hovertemplate: '&#955;= %{x:.0f} nm: %{y:.2f}<extra></extra>',
	}];

	var AllTraces = [ trace1[0], trace2[0], trace3[0] ];

layout =  {
    hovermode:'closest',
    xaxis: {
      title: 'wavelength (nm)'
  	   },
    
    yaxis: {
      title: 'Absorption (A.U.)'},
      
    title: 'UV-Vis spectra (interactive view)',
    showlegend: true,
	legend: {
	x: 0,
	y: 1.1,
	orientation: "h"
	}
      }
      
      
      
      
	Plotly.newPlot('myDiv',
	{data: AllTraces,layout: layout});
};
  
  
  makeplot();
  
   </script>
 

 </body> 
 
 </html>